{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49652753-628f6ab7e356d597b0d2f9b26';\n\nlet per_page = 15;\n\nexport const fetchImages = async (searchText, page) => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: searchText,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: per_page,\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'inline-block';\n  }\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'none';\n  }\n}\n\nexport const clearGallery = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n  smoothScroll();\n};\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n                <p><b>Likes</b><br>${likes}</p>\n                <p><b>Views</b><br>${views}</p>\n                <p><b>Comments</b><br>${comments}</p>\n                <p><b>Downloads</b><br>${downloads}</p>\n            </div>\n      </li>`\n      )\n      .join('')\n  );\n\n  lightbox.refresh();\n}\n\nexport function initializeLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n  lightbox.refresh();\n}\n\nexport function smoothScroll() {\n  const firstCard = document.querySelector('.gallery-item');\n\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n}\n\nexport function showloadMore() {\n  const loadMore = document.querySelector('.load-more');\n  if (loadMore) {\n    loadMore.style.display = 'flex';\n  }\n}\n\nexport function hideloadMore() {\n  const loadMore = document.querySelector('.load-more');\n  if (loadMore) {\n    loadMore.style.display = 'none';\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  showLoader,\n  hideLoader,\n  clearGallery,\n  renderImages,\n  initializeLightbox,\n  showloadMore,\n  hideloadMore,\n  smoothScroll,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentSearchText = '';\nlet totalHits = 0;\n\nhideLoader();\nhideloadMore();\n\nform.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  const searchText = form\n    .querySelector('input[name=\"search-text\"]')\n    .value.trim();\n\n  if (!searchText) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please, enter the text for search!',\n    });\n    return;\n  }\n\n  if (searchText !== currentSearchText) {\n    currentPage = 1;\n    clearGallery();\n    smoothScroll();\n    currentSearchText = searchText;\n  }\n\n  showLoader();\n\n  try {\n    const response = await fetchImages(currentSearchText, currentPage);\n    hideLoader();\n\n    if (!response || !response.hits || response.hits.length === 0) {\n      iziToast.warning({\n        title: 'Caution',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideloadMore();\n      return;\n    }\n\n    const images = response.hits;\n    totalHits = response.totalHits;\n\n    renderImages(images);\n    initializeLightbox();\n\n    const totalPages = Math.ceil(totalHits / 15);\n    if (currentPage >= totalPages) {\n      hideloadMore();\n    } else {\n      showloadMore();\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Illegal operation.',\n    });\n    console.error(error);\n  }\n});\n\nif (loadMoreButton) {\n  loadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader();\n\n    try {\n      const response = await fetchImages(currentSearchText, currentPage);\n      hideLoader();\n\n      if (!response || !response.hits || response.hits.length === 0) {\n        iziToast.warning({\n          title: 'Caution',\n          message: 'Sorry, no more images available.',\n        });\n        hideloadMore();\n        return;\n      }\n\n      renderImages(response.hits);\n      initializeLightbox();\n      smoothScroll();\n\n      const totalPages = Math.ceil(totalHits / 15);\n      if (currentPage >= totalPages) {\n        hideloadMore();\n      } else {\n        showloadMore();\n      }\n    } catch (error) {\n      hideLoader();\n      iziToast.error({\n        title: 'Error',\n        message: 'Error loading more images.',\n      });\n      console.error(error);\n    }\n  });\n}\n"],"names":["API_KEY","per_page","fetchImages","searchText","page","axios","error","lightbox","SimpleLightbox","showLoader","loader","hideLoader","clearGallery","gallery","smoothScroll","renderImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","initializeLightbox","firstCard","cardHeight","showloadMore","loadMore","hideloadMore","form","loadMoreButton","currentPage","currentSearchText","totalHits","event","iziToast","response","totalPages"],"mappings":"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"}